<!DOCTYPE html>
<html>
<head>
    <title>Data Entry</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Enter Timeslots and Rooms</h1>
    <form action="{{ url_for('submit') }}" method="post">
        <h2>Timeslots</h2>
        <div id="timeslots">
            <div>
                <input type="text" name="timeslot" placeholder="id,day,start_hour,start_minute,end_hour,end_minute">
            </div>
        </div>
        <button type="button" onclick="addTimeslot()">Add Timeslot</button>
        
        <h2>Rooms</h2>
        <div id="rooms">
            <div>
                <input type="text" name="room" placeholder="id,name">
            </div>
        </div>
        <button type="button" onclick="addRoom()">Add Room</button>
        
        <h2>Lessons</h2>
        <div id="lessons">
            <div>
                <label>Subject: <input type="text" name="subject_0" required></label>
                <label>Teacher: <input type="text" name="teacher_0" required></label>
                <label>Group/Class: <input type="text" name="group_0" required></label>
            </div>
        </div>
        <button type="button" id="add_lesson">Add Lesson</button>
        
        <input type="hidden" id="lesson_count" name="lesson_count" value="1">
        <input type="hidden" id="check_sample" name="check_sample" value="false">
        
        <br><br>
        <input type="submit" value="Submit">
    </form>

    <button id="sample_data">Use Sample Data</button>

    <script>
        let lessonCount = 1;
        let check_sample = false;

        function addTimeslot() {
            var div = document.createElement('div');
            div.innerHTML = '<input type="text" name="timeslot" placeholder="id,day,start_hour,start_minute,end_hour,end_minute">';
            document.getElementById('timeslots').appendChild(div);
        }

        function addRoom() {
            var div = document.createElement('div');
            div.innerHTML = '<input type="text" name="room" placeholder="id,name">';
            document.getElementById('rooms').appendChild(div);
        }

        $('#add_lesson').click(function() {
            lessonCount++;
            $('#lessons').append(`
                <div>
                    <label>Subject: <input type="text" name="subject_${lessonCount - 1}" required></label>
                    <label>Teacher: <input type="text" name="teacher_${lessonCount - 1}" required></label>
                    <label>Group/Class: <input type="text" name="group_${lessonCount - 1}" required></label>
                </div>
            `);
            $('#lesson_count').val(lessonCount);
        });

        $('#sample_data').click(function() {
            check_sample = true;
            $('#check_sample').val('true');
        });
    </script>
</body>
</html>